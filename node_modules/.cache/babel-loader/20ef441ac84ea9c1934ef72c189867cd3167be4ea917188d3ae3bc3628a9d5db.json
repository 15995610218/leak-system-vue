{"ast":null,"code":"/**\n * 封装后台交互方法\n */\nimport axios from \"axios\";\nimport baseUrl from \"@/utils/baseURL\";\nimport { Message } from \"element-ui\";\nimport store from \"@/store\";\nconst http = {};\nvar instance = axios.create({\n  baseURL: baseUrl,\n  timeout: 5000\n});\n//请求拦截器\ninstance.interceptors.request.use(config => {\n  if (store.state.UserToken) {\n    config.headers.token = store.state.UserToken;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n//响应拦截器\ninstance.interceptors.response.use(response => {\n  console.log(\"====响应拦截器---sec======\");\n  return response.data;\n}, err => {\n  console.log(\"=====响应拦截器---err=======\");\n  if (err && err.response) {\n    switch (err.response.state) {\n      case 400:\n        err.message = '请求出错';\n        break;\n      case 401:\n        console.log(\"44444444401\");\n        Message.warning({\n          message: '授权失败，请重新登陆'\n        });\n        store.commit('LOGIN_OUT');\n        setTimeout(() => {\n          window.location.reload();\n        }, 1000);\n        return;\n      case 403:\n        err.message = '拒绝访问';\n        break;\n      case 404:\n        err.message = '请求错误,未找到该资源';\n        break;\n      case 500:\n        err.message = '服务器端错误';\n        break;\n    }\n  } else {\n    err.message = '连接服务失败';\n  }\n  Message.error({\n    message: err.message\n  });\n  return Promise.reject(err.response);\n});\nhttp.get = function (url, options) {\n  return new Promise((resolve, reject) => {\n    instance.get(url, options).then(response => {\n      if (response.state === 200) {\n        resolve(response.data);\n      } else {\n        Message.error({\n          message: response.message\n        });\n      }\n    }).catch(e => {\n      //console.log(e)\n    });\n  });\n};\nhttp.post = function (url, data, options) {\n  return new Promise((resolve, reject) => {\n    instance.post(url, data, options).then(response => {\n      if (response.state === 200) {\n        resolve(response);\n      } else {\n        Message.error({\n          message: response.message\n        });\n        reject(response.message);\n      }\n    });\n  }).catch(e => {\n    Message.error(e);\n  });\n};\nhttp.download = function (url, data, options) {\n  return new Promise((resolve, reject) => {\n    instance.post(url, data, options).then(response => {\n      if (response) {\n        resolve(response);\n      } else {\n        reject(\"错误操作!\");\n      }\n    });\n  }).catch(e => {\n    Message.error(e);\n  });\n};\nexport default http;","map":{"version":3,"names":["axios","baseUrl","Message","store","http","instance","create","baseURL","timeout","interceptors","request","use","config","state","UserToken","headers","token","error","Promise","reject","response","console","log","data","err","message","warning","commit","setTimeout","window","location","reload","get","url","options","resolve","then","catch","e","post","download"],"sources":["/Users/hailongwei/Nodejs/vuepreject/vuedemo20221202/src/utils/http.js"],"sourcesContent":["/**\n * 封装后台交互方法\n */\nimport axios from \"axios\";\nimport baseUrl from \"@/utils/baseURL\";\nimport {Message} from \"element-ui\";\nimport store from \"@/store\";\n\nconst http = {}\n\nvar instance = axios.create({\n    baseURL:baseUrl,\n    timeout:5000\n})\n//请求拦截器\ninstance.interceptors.request.use(\n    (config) => {\n        if (store.state.UserToken){\n            config.headers.token = store.state.UserToken;\n        }\n        return config;\n    },(error) =>{\n        return Promise.reject(error);\n    }\n)\n//响应拦截器\ninstance.interceptors.response.use(\n    response =>{\n        console.log(\"====响应拦截器---sec======\")\n       return response.data\n    },\n    err =>{\n        console.log(\"=====响应拦截器---err=======\")\n        if (err && err.response){\n            switch (err.response.state){\n                case 400:\n                    err.message='请求出错'\n                    break\n                case 401:\n                    console.log(\"44444444401\")\n                    Message.warning({\n                        message:'授权失败，请重新登陆'\n                    })\n                    store.commit('LOGIN_OUT')\n                    setTimeout(() =>{\n                        window.location.reload()\n                    },1000)\n                    return\n                case 403:\n                    err.message='拒绝访问'\n                    break\n                case 404:\n                    err.message='请求错误,未找到该资源'\n                    break\n                case 500:\n                    err.message='服务器端错误'\n                    break\n            }\n        }else {\n            err.message='连接服务失败'\n        }\n        Message.error({\n            message:err.message\n        })\n        return Promise.reject(err.response)\n    }\n)\n\nhttp.get = function (url,options){\n    return new Promise((resolve,reject)=>{\n        instance.get(url,options).then(response => {\n            if (response.state === 200){\n                resolve(response.data)\n            }else {\n                Message.error({\n                    message:response.message\n                })\n            }\n        }).catch(e =>{\n            //console.log(e)\n        })\n    })\n}\nhttp.post = function (url,data,options){\n    return new Promise((resolve,reject) =>{\n        instance.post(url,data,options).then(response =>{\n                if (response.state === 200){\n                    resolve(response)\n                }else {\n                    Message.error({\n                        message: response.message\n                    })\n                    reject(response.message);\n                }\n            }\n        )\n    }).catch(e=>{\n        Message.error(e)\n    })\n}\nhttp.download = function (url,data,options){\n    return new Promise((resolve,reject) =>{\n        instance.post(url,data,options).then(response =>{\n            if (response){\n                resolve(response);\n            }else {\n                reject(\"错误操作!\");\n            }\n        })\n    }).catch(e=>{\n        Message.error(e)\n    })\n\n}\nexport default http\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}