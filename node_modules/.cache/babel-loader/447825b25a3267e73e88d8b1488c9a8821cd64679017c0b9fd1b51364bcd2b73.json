{"ast":null,"code":"import md5 from \"md5\";\nimport request from \"@/utils/request\";\nimport { login } from \"../../api/index\";\nexport default {\n  name: 'login',\n  data() {\n    return {\n      username: '',\n      password: ''\n    };\n  },\n  methods: {\n    submitForm() {\n      if (this.username.length < 5) {\n        this.$message.error('用户名不能小于5位字符');\n        return;\n      }\n      if (!/^\\S*(?=\\S{6,})(?=\\S*\\d)(?=\\S*[A-Z])(?=\\S*[a-z])(?=\\S*[!@#$%^&*? ])\\S*$/.test(this.password)) {\n        this.$message.error('用户密码不符合安全要求：不少于6位，必须包含大小写字母、数字、特殊字符！');\n        return;\n      }\n      // this.loginUser(this.username,this.password);\n      //console.log(\"提交用户密码\")\n      this.login(this.username, this.password);\n    },\n    // async loginUser(username,password) {\n    //     request({\n    //         method:'GET',\n    //         url:'/user/login',\n    //         params:{username,password}\n    //     }).then(res => {\n    //         if (res.data.state === 200){\n    //             this.$router.push({\n    //                 path:'/'\n    //             })\n    //         }\n    //     }).catch(err => {\n    //         this.$message.error(err.message);\n    //     })\n    // }\n    async login(username, password) {\n      await login(username, password).then(res => {\n        console.log(res.data);\n        if (res.data.state === 200) {\n          this.$store.commit('LOGIN_IN', res.data.data.token);\n          this.$router.replace(\"/\");\n        } else {\n          this.$message.error(res.data.message);\n        }\n      }).catch(err => {\n        this.$message.error(err.message);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AACA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;MACA;MACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;MACA;QACAC;QACA;UACA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","username","password","methods","submitForm","console"],"sourceRoot":"src/views/login","sources":["index.vue"],"sourcesContent":["<script>\n    import md5 from \"md5\";\n    import request from \"@/utils/request\";\n    import { login } from \"../../api/index\"\n    export default {\n        name:'login',\n        data(){\n            return{\n                username:'',\n                password:''\n            }\n        },\n        methods:{\n            submitForm(){\n                if (this.username.length < 5){\n                    this.$message.error('用户名不能小于5位字符');\n                    return;\n                }\n                if(!/^\\S*(?=\\S{6,})(?=\\S*\\d)(?=\\S*[A-Z])(?=\\S*[a-z])(?=\\S*[!@#$%^&*? ])\\S*$/.test(this.password)){\n                    this.$message.error('用户密码不符合安全要求：不少于6位，必须包含大小写字母、数字、特殊字符！')\n                    return;\n                }\n                // this.loginUser(this.username,this.password);\n                //console.log(\"提交用户密码\")\n                this.login(this.username,this.password);\n            },\n            // async loginUser(username,password) {\n            //     request({\n            //         method:'GET',\n            //         url:'/user/login',\n            //         params:{username,password}\n            //     }).then(res => {\n            //         if (res.data.state === 200){\n            //             this.$router.push({\n            //                 path:'/'\n            //             })\n            //         }\n            //     }).catch(err => {\n            //         this.$message.error(err.message);\n            //     })\n            // }\n            async login(username,password){\n                await login(username,password).then(res =>{\n                    console.log(res.data);\n                    if (res.data.state === 200){\n                        this.$store.commit('LOGIN_IN',res.data.data.token);\n                        this.$router.replace(\"/\");\n                    }else {\n                        this.$message.error(res.data.message);\n                    }\n                }).catch(err =>{\n                    this.$message.error(err.message);\n                });\n            }\n        }\n    }\n\n</script>\n\n<template>\n    <div class=\"login-container\">\n        <div class=\"form-wrap\">\n            <h2 class=\"header\">信息安全管理系统</h2>\n            <el-input placeholder=\"请输入用户名\" v-model=\"username\"></el-input>\n            <el-input class=\"psw\" placeholder=\"请输入密码\" v-model=\"password\" show-password></el-input>\n            <el-button type=\"success\" @click=\"submitForm\">登陆</el-button>\n        </div>\n\n\n    </div>\n\n</template>\n\n\n<style lang=\"less\" scoped>\n    .login-container{\n        height: 100%;\n        background: whitesmoke;\n    }\n    .form-wrap{\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        width: 360px;\n        transform: translate(-50%,-50%);\n        background: white;\n        border-radius: 15px;\n        padding: 32px 32px 20px;\n    }\n    .header{\n        text-align: center;\n        margin-bottom: 32px;\n    }\n    .psw{\n        margin-top: 20px;\n        margin-bottom: 20px;\n    }\n    .el-button{\n        width: 100%;\n    }\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}